import{c as L,r as m,j as e,B as w,d as p,s as b,g as R,h as P,D as W,a as J,u as Z}from"./index-Cfyb-cTT.js";import{T as ee,a as ae,b as A,c as F}from"./tabs-Cnv0rUHt.js";import{I as T,A as te,a as re}from"./input-DI_PInR2.js";import{B as se,T as Y,L as B}from"./Layout-Bu6kW370.js";import{C as H,a as U,b as K,c as O}from"./index-lOgDGn8a.js";import{T as z,a as X,b as k,c as u,d as Q,e as g}from"./table-B3C0REyg.js";import{R as M}from"./refresh-cw-BuMAAk62.js";import{L as y}from"./label-KRVLd3Sf.js";import{T as ie}from"./textarea-Br_aITBP.js";import{D as V}from"./DateInput-DswrObUo.js";import{f as G}from"./dateUtils-GKxu_fIk.js";import{S as ne}from"./square-pen-PhqW0fJJ.js";import{C as le}from"./circle-alert-XyUDaGPe.js";import"./format-CaiECi-v.js";import"./addDays-ggkpGDyJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=L("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=L("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=L("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),he=({user:a})=>{const[l,c]=m.useState([]),[h,n]=m.useState(!1),t=async()=>{if(!a||a.role!=="admin"){console.log("User is not admin, skipping history load");return}n(!0),console.log("=== LOADING HISTORY FROM ARCHIVE TABLE ===");try{console.log("Querying asset_history_archive directly...");const{data:r,error:s,count:o}=await b.from("asset_history_archive").select("*",{count:"exact"}).order("created_at",{ascending:!1}).limit(100);if(console.log("Query result:",{data:r,error:s,count:o,dataLength:r==null?void 0:r.length}),s)throw console.error("Archive query error:",s),s;console.log("✅ Archive history query successful:",(r==null?void 0:r.length)||0,"records"),r&&r.length>0&&console.log("Sample record:",r[0]),c(r||[])}catch(r){console.error("=== LOAD ARCHIVE HISTORY ERROR ==="),console.error("Error:",r),p.error("Không thể tải lịch sử: "+r.message),c([])}finally{n(!1)}},i=async(r,s)=>{if(!a||a.role!=="admin"){p.error("Chỉ admin mới có thể xóa lịch sử");return}if(window.confirm(`Bạn có chắc chắn muốn xóa bản ghi lịch sử của "${s}"?`)){n(!0),console.log("=== DELETING HISTORY RECORD ==="),console.log("History ID:",r);try{const{error:o}=await b.from("asset_history_archive").delete().eq("id",r);if(o)throw console.error("Delete history error:",o),o;console.log("History record deleted successfully"),await t(),p.success("Xóa bản ghi lịch sử thành công")}catch(o){console.error("=== DELETE HISTORY ERROR ==="),console.error("Error:",o),p.error("Không thể xóa bản ghi lịch sử: "+o.message)}finally{n(!1)}}};m.useEffect(()=>{t()},[a]);const d=()=>{console.log("=== MANUAL REFRESH TRIGGERED ==="),t()};return e.jsxs(H,{children:[e.jsx(U,{children:e.jsxs(K,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Lịch sử thay đổi (",l.length," bản ghi)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(w,{onClick:d,variant:"outline",size:"sm",disabled:h,className:"flex items-center",children:[e.jsx(M,{className:`w-4 h-4 mr-2 ${h?"animate-spin":""}`}),"Làm mới"]}),(a==null?void 0:a.role)==="admin"&&e.jsx(w,{onClick:()=>{console.log("=== DEBUG INFO ==="),console.log("Current user:",a),console.log("History data:",l),console.log("Loading state:",h)},variant:"outline",size:"sm",children:"Debug"})]})]})}),e.jsx(O,{children:h?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-2",children:"Đang tải lịch sử..."})]}):l.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Chưa có lịch sử thay đổi nào"}),e.jsx("p",{className:"text-sm",children:"Thử thực hiện thao tác thêm/sửa/xóa tài sản để tạo lịch sử"}),e.jsxs(w,{onClick:d,variant:"outline",size:"sm",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Thử lại"]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-green-600 bg-green-50 p-2 rounded",children:["✅ Đã tìm thấy ",l.length," bản ghi lịch sử (Lưu trữ độc lập)"]}),e.jsxs(z,{children:[e.jsx(X,{children:e.jsxs(k,{children:[e.jsx(u,{children:"ID Tài sản"}),e.jsx(u,{children:"Tên tài sản"}),e.jsx(u,{children:"Loại thay đổi"}),e.jsx(u,{children:"Người thay đổi"}),e.jsx(u,{children:"Lý do"}),e.jsx(u,{children:"Thời gian"}),e.jsx(u,{children:"Thao tác"})]})}),e.jsx(Q,{children:l.map((r,s)=>{var o;return e.jsxs(k,{children:[e.jsxs(g,{className:"font-mono text-xs",children:[((o=r.original_asset_id)==null?void 0:o.slice(0,8))||"N/A","..."]}),e.jsx(g,{children:r.asset_name||"N/A"}),e.jsx(g,{children:e.jsx(se,{variant:r.change_type==="delete"?"destructive":"default",children:r.change_type==="delete"?"Xóa":r.change_type==="update"?"Cập nhật":"Tạo mới"})}),e.jsx(g,{children:r.changed_by||"N/A"}),e.jsx(g,{className:"max-w-xs truncate",children:r.change_reason||"N/A"}),e.jsx(g,{children:r.created_at?new Date(r.created_at).toLocaleString("vi-VN"):"N/A"}),e.jsx(g,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{size:"sm",variant:"outline",onClick:()=>{console.log("History detail:",r),p.info(`Chi tiết lịch sử: ${r.change_type} bởi ${r.changed_by}`)},children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx(w,{size:"sm",variant:"destructive",onClick:()=>i(r.id,r.asset_name),disabled:h,children:e.jsx(Y,{className:"w-4 h-4"})})]})})]},r.id||s)})})]})]})})]})},me=a=>{const[l,c]=m.useState(!1);return{saveHistory:m.useCallback(async n=>{if(console.log("=== SAVING HISTORY TO ARCHIVE TABLE ==="),console.log("History record:",n),!(a!=null&&a.username))return console.error("No user context available for history"),null;c(!0);try{const t={original_asset_id:n.asset_id,asset_name:n.asset_name,change_type:n.change_type,changed_by:n.changed_by,change_reason:n.change_reason,old_data:n.old_data||null,new_data:n.new_data||null};console.log("Inserting to asset_history_archive:",t);const{data:i,error:d}=await b.from("asset_history_archive").insert([t]).select();if(d)throw console.error("Archive insert error:",d),d;return console.log("✅ History archived successfully:",i),c(!1),(i==null?void 0:i[0])||null}catch(t){return console.error("=== ARCHIVE SAVE ERROR ==="),console.error("Error:",t),n.change_type!=="delete"&&p.error("Cảnh báo",{description:"Không thể lưu lịch sử thay đổi"}),c(!1),null}},[a,c]),isLoading:l}},xe=a=>{const{saveHistory:l}=me(a),c=m.useCallback(async()=>{if(!a)return[];try{console.log("Loading other assets data..."),await R(a);const{data:t,error:i}=await b.from("other_assets").select("*").order("created_at",{ascending:!1});if(i)throw console.error("Error loading assets:",i),i;return console.log("Assets loaded:",t),t||[]}catch(t){return console.error("Error loading data:",t),p.error("Không thể tải dữ liệu",{description:t.message}),[]}},[a]),h=m.useCallback(async(t,i,d)=>{var r,s,o,C;if(console.log("=== STARTING SAVE OPERATION ==="),!t.name.trim())return p.error("Lỗi",{description:"Vui lòng nhập tên tài sản"}),!1;if(!t.deposit_date)return p.error("Lỗi",{description:"Vui lòng chọn ngày gửi kho"}),!1;if(i&&!d.trim())return p.error("Lỗi",{description:"Vui lòng nhập lý do thay đổi"}),!1;try{await R(a);const j=P(t.notes,!!i);console.log("DEBUG: newAsset.deposit_date before processing:",t.deposit_date);const f={name:t.name.trim(),deposit_date:t.deposit_date.trim()===""?null:t.deposit_date,depositor:((r=t.depositor)==null?void 0:r.trim())||null,deposit_receiver:((s=t.deposit_receiver)==null?void 0:s.trim())||null,withdrawal_date:t.withdrawal_date.trim()===""?null:t.withdrawal_date,withdrawal_deliverer:((o=t.withdrawal_deliverer)==null?void 0:o.trim())||null,withdrawal_receiver:((C=t.withdrawal_receiver)==null?void 0:C.trim())||null,notes:j};if(console.log("DEBUG: assetData.deposit_date sent to DB:",f.deposit_date),console.log("DEBUG: Full assetData payload:",f),i){const{data:x,error:v}=await b.from("other_assets").update(f).eq("id",i.id).select();if(v)throw console.error("Asset update error:",v),v;if(a!=null&&a.username&&(x!=null&&x[0])){const N={id:i.id,name:i.name,deposit_date:i.deposit_date,depositor:i.depositor,deposit_receiver:i.deposit_receiver,withdrawal_date:i.withdrawal_date,withdrawal_deliverer:i.withdrawal_deliverer,withdrawal_receiver:i.withdrawal_receiver,notes:i.notes,created_at:i.created_at,updated_at:i.updated_at};await l({asset_id:i.id,asset_name:i.name,change_type:"update",changed_by:a.username,change_reason:d,old_data:N,new_data:x[0]})}p.success("Thành công",{description:"Cập nhật tài sản thành công"})}else{const{data:x,error:v}=await b.from("other_assets").insert([f]).select();if(v)throw console.error("Asset insert error:",v),v;a!=null&&a.username&&(x!=null&&x[0])&&await l({asset_id:x[0].id,asset_name:x[0].name,change_type:"create",changed_by:a.username,change_reason:"Tạo mới tài sản",new_data:x[0]}),p.success("Thành công",{description:"Thêm tài sản thành công"})}return!0}catch(j){return console.error("=== SAVE OPERATION ERROR ==="),console.error("Error:",j),p.error("Lỗi",{description:"Không thể lưu tài sản: "+j.message}),!1}},[a,l]),n=m.useCallback(async t=>{if(!a||a.role!=="admin")return p.error("Không có quyền",{description:"Chỉ admin mới có thể xóa"}),!1;if(!window.confirm(`Bạn có chắc chắn muốn xóa tài sản "${t.name}"?`))return!1;try{if(console.log("=== DELETING ASSET WITH ENHANCED HISTORY ==="),await R(a),a!=null&&a.username){const d={id:t.id,name:t.name,deposit_date:t.deposit_date,depositor:t.depositor,deposit_receiver:t.deposit_receiver,withdrawal_date:t.withdrawal_date,withdrawal_deliverer:t.withdrawal_deliverer,withdrawal_receiver:t.withdrawal_receiver,notes:t.notes,created_at:t.created_at,updated_at:t.updated_at};await l({asset_id:t.id,asset_name:t.name,change_type:"delete",changed_by:a.username,change_reason:"Xóa tài sản",old_data:d}),await new Promise(r=>setTimeout(r,1e3));try{const{data:r}=await b.from("asset_history_archive").select("id").eq("original_asset_id",t.id).eq("change_type","delete").eq("changed_by",a.username);(!r||r.length===0)&&(await new Promise(s=>setTimeout(s,500)),await l({asset_id:t.id,asset_name:t.name,change_type:"delete",changed_by:a.username,change_reason:"Xóa tài sản (retry)",old_data:d}))}catch(r){console.error("History verification error:",r)}}const{error:i}=await b.from("other_assets").delete().eq("id",t.id);if(i)throw console.error("Delete error:",i),i;return p.success("Thành công",{description:"Xóa tài sản thành công và đã lưu lịch sử"}),!0}catch(i){return console.error("=== DELETE ERROR ==="),console.error("Error:",i),p.error("Lỗi",{description:"Không thể xóa tài sản: "+i.message}),!1}},[a,l]);return{loadAssets:c,saveAsset:h,deleteAsset:n}},ge=a=>{const[l,c]=m.useState([]),[h,n]=m.useState(!0),[t,i]=m.useState(""),[d,r]=m.useState(null),[s,o]=m.useState(""),[C,j]=m.useState({type:"",text:""}),[f,x]=m.useState({name:"",deposit_date:"",depositor:"",deposit_receiver:"",withdrawal_date:"",withdrawal_deliverer:"",withdrawal_receiver:"",notes:""}),{loadAssets:v,saveAsset:N,deleteAsset:S}=xe(a);m.useEffect(()=>{(async()=>{n(!0);const E=await v();c(E),n(!1)})()},[a,v]);const D=m.useMemo(()=>l.filter(_=>Object.values(_).some(E=>String(E).toLowerCase().includes(t.toLowerCase()))),[l,t]),I=()=>{x({name:"",deposit_date:"",depositor:"",deposit_receiver:"",withdrawal_date:"",withdrawal_deliverer:"",withdrawal_receiver:"",notes:""}),r(null),o("")};return{assets:l,filteredAssets:D,isLoading:h,searchTerm:t,setSearchTerm:i,editingAsset:d,setEditingAsset:r,changeReason:s,setChangeReason:o,newAsset:f,setNewAsset:x,handleSave:async()=>{if(j({type:"",text:""}),!f.name.trim()){j({type:"error",text:"Tên tài sản là bắt buộc"});return}if(n(!0),await N(f,d,s)){j({type:"success",text:d?"Cập nhật tài sản thành công":"Thêm tài sản mới thành công"}),I();const E=await v();c(E)}n(!1)},editAsset:_=>{r({..._}),x({name:_.name||"",deposit_date:_.deposit_date||"",depositor:_.depositor||"",deposit_receiver:_.deposit_receiver||"",withdrawal_date:_.withdrawal_date||"",withdrawal_deliverer:_.withdrawal_deliverer||"",withdrawal_receiver:_.withdrawal_receiver||"",notes:_.notes||""})},deleteAsset:async _=>{if(j({type:"",text:""}),n(!0),await S(_)){j({type:"success",text:"Xóa tài sản thành công"});const $=await v();c($)}n(!1)},clearForm:I,message:C,setMessage:j}},pe=({newAsset:a,setNewAsset:l,editingAsset:c,changeReason:h,setChangeReason:n,isLoading:t,onSave:i,onClear:d,onCancelEdit:r})=>e.jsxs(H,{children:[e.jsx(U,{children:e.jsx(K,{children:c?"Chỉnh sửa tài sản":"Thêm mới tài sản gửi kho"})}),e.jsxs(O,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(y,{htmlFor:"name",children:"Tên tài sản / thùng *"}),e.jsx(T,{id:"name",value:a.name,onChange:s=>l(o=>({...o,name:s.target.value})),placeholder:"Nhập tên tài sản..."})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"deposit_date",children:"Ngày gửi kho *"}),e.jsx(V,{value:a.deposit_date,onChange:s=>l(o=>({...o,deposit_date:s}))})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"depositor",children:"Người gửi kho"}),e.jsx(T,{id:"depositor",value:a.depositor,onChange:s=>l(o=>({...o,depositor:s.target.value})),placeholder:"Nhập tên người gửi..."})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"deposit_receiver",children:"Người nhận (khi gửi)"}),e.jsx(T,{id:"deposit_receiver",value:a.deposit_receiver,onChange:s=>l(o=>({...o,deposit_receiver:s.target.value})),placeholder:"Nhập tên người nhận..."})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"withdrawal_date",children:"Ngày xuất kho (nếu có)"}),e.jsx(V,{value:a.withdrawal_date,onChange:s=>l(o=>({...o,withdrawal_date:s}))})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"withdrawal_deliverer",children:"Người giao (khi xuất)"}),e.jsx(T,{id:"withdrawal_deliverer",value:a.withdrawal_deliverer,onChange:s=>l(o=>({...o,withdrawal_deliverer:s.target.value})),placeholder:"Nhập tên người giao..."})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"withdrawal_receiver",children:"Người nhận (khi xuất)"}),e.jsx(T,{id:"withdrawal_receiver",value:a.withdrawal_receiver,onChange:s=>l(o=>({...o,withdrawal_receiver:s.target.value})),placeholder:"Nhập tên người nhận..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(y,{htmlFor:"notes",children:"Ghi chú (thời gian sẽ được thêm tự động)"}),e.jsx(T,{id:"notes",value:a.notes,onChange:s=>l(o=>({...o,notes:s.target.value})),placeholder:"Nhập ghi chú..."})]}),c&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(y,{htmlFor:"change_reason",children:"Lý do thay đổi *"}),e.jsx(ie,{id:"change_reason",value:h,onChange:s=>n(s.target.value),placeholder:"Nhập lý do thay đổi..."})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx(w,{variant:"outline",onClick:d,disabled:t,children:"Clear"}),c&&e.jsx(w,{variant:"outline",onClick:r,disabled:t,children:"Hủy"}),e.jsx(w,{onClick:i,className:"bg-indigo-600 hover:bg-indigo-700",disabled:t||!a.name.trim()||!a.deposit_date,children:t?"Đang lưu...":c?"Cập nhật":"Thêm mới"})]})]})]}),ue=({searchTerm:a,setSearchTerm:l,filteredAssets:c})=>{const h=()=>{const t=[["Tên tài sản","Ngày gửi","Người gửi","Người nhận (gửi)","Ngày xuất","Người giao (xuất)","Người nhận (xuất)","Ghi chú"].join(","),...c.map(s=>[s.name,s.deposit_date,s.depositor||"",s.deposit_receiver||"",s.withdrawal_date||"",s.withdrawal_deliverer||"",s.withdrawal_receiver||"",s.notes||""].join(","))].join(`
`),i="\uFEFF",d=new Blob([i+t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(r.download!==void 0){const s=URL.createObjectURL(d);r.setAttribute("href",s),r.setAttribute("download",`tai-san-khac-${new Date().toISOString().split("T")[0]}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}};return e.jsx(H,{children:e.jsx(O,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(T,{placeholder:"Tìm kiếm tài sản...",value:a,onChange:n=>l(n.target.value),className:"pl-10"})]}),e.jsxs(w,{onClick:h,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Xuất CSV"]})]})})})},_e=({filteredAssets:a,user:l,onEdit:c,onDelete:h})=>e.jsxs(z,{children:[e.jsx(X,{children:e.jsxs(k,{children:[e.jsx(u,{children:"Tên tài sản / thùng"}),e.jsx(u,{children:"Ngày gửi"}),e.jsx(u,{children:"Người gửi"}),e.jsx(u,{children:"Người nhận (gửi)"}),e.jsx(u,{children:"Ngày xuất"}),e.jsx(u,{children:"Người giao (xuất)"}),e.jsx(u,{children:"Người nhận (xuất)"}),e.jsx(u,{children:"Ghi chú"}),e.jsx(u,{children:"Thao tác"})]})}),e.jsx(Q,{children:a.length>0?a.map(n=>e.jsxs(k,{children:[e.jsx(g,{className:"font-medium",children:n.name}),e.jsx(g,{children:G(n.deposit_date)}),e.jsx(g,{children:n.depositor}),e.jsx(g,{children:n.deposit_receiver}),e.jsx(g,{children:G(n.withdrawal_date)}),e.jsx(g,{children:n.withdrawal_deliverer}),e.jsx(g,{children:n.withdrawal_receiver}),e.jsx(g,{children:n.notes}),e.jsx(g,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{size:"sm",variant:"outline",onClick:()=>c(n),children:e.jsx(ne,{className:"w-4 h-4"})}),(l==null?void 0:l.role)==="admin"&&e.jsx(w,{size:"sm",variant:"destructive",onClick:()=>h(n),children:e.jsx(Y,{className:"w-4 h-4"})})]})})]},n.id)):e.jsx(k,{children:e.jsx(g,{colSpan:9,className:"text-center text-gray-500",children:"Không có dữ liệu"})})})]}),Ae=()=>{const{user:a}=J(),l=Z(),{filteredAssets:c,isLoading:h,searchTerm:n,setSearchTerm:t,editingAsset:i,setEditingAsset:d,changeReason:r,setChangeReason:s,newAsset:o,setNewAsset:C,handleSave:j,editAsset:f,deleteAsset:x,clearForm:v,message:N,setMessage:S}=ge(a);m.useEffect(()=>{if(a&&a.department!=="NQ"&&a.role!=="admin"){S({type:"error",text:"Chỉ nhân viên phòng NQ và admin mới có thể truy cập module này"}),setTimeout(()=>l("/"),3e3);return}},[a,l,S]);const D=()=>{d(null),s("")};return h&&c.length===0?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}):e.jsx(B,{children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-indigo-100 rounded-full",children:e.jsx(q,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tài sản, thùng khác gửi kho"}),e.jsx("p",{className:"text-gray-600",children:"Quản lý tài sản và thùng khác được gửi vào kho"})]})]}),N.text&&e.jsxs(te,{variant:N.type==="error"?"destructive":"default",className:N.type==="success"?"bg-green-100 border-green-400 text-green-800":"",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx(re,{children:N.text})]}),e.jsxs(ee,{defaultValue:"assets",className:"w-full",children:[e.jsxs(ae,{children:[e.jsxs(A,{value:"assets",className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Quản lý tài sản"]}),(a==null?void 0:a.role)==="admin"&&e.jsxs(A,{value:"history",className:"flex items-center",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Lịch sử thay đổi"]})]}),e.jsxs(F,{value:"assets",className:"space-y-6",children:[e.jsx(pe,{newAsset:o,setNewAsset:C,editingAsset:i,changeReason:r,setChangeReason:s,isLoading:h,onSave:j,onClear:v,onCancelEdit:D}),e.jsx(ue,{searchTerm:n,setSearchTerm:t,filteredAssets:c}),e.jsx(_e,{filteredAssets:c,user:a,onEdit:f,onDelete:x})]}),(a==null?void 0:a.role)==="admin"&&e.jsx(F,{value:"history",children:e.jsx(he,{user:a})})]})]})})};export{Ae as default};
